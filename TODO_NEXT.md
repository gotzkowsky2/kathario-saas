# 내일 이어서 할 작업 체크리스트 (직원 실행/매뉴얼 연결/진행률)

- [ ] 진행률 120% 오류 수정
  - 상위 항목 수(중복 제외) + 모든 연결항목 수를 정확히 합산
  - 상위 완료 집계가 중복 가산되지 않도록 정규화
  - GET `/api/employee/checklist-progress`에서 itemsTree 생성 시 누적 합산로직 검증/단위 테스트 추가

- [ ] 매뉴얼 연결 표시 보정
  - 팝업: 매뉴얼 상세 API가 `precautions`를 반드시 포함하도록 확인 (테넌트 필터 포함)
  - 목록/상세 배지: "체크리스트 항목에 연결된 매뉴얼들"의 연결 주의사항 총합으로 계산
  - 관리 화면에서 연결 후 직원 화면에서 즉시 반영되는지 QA

- [ ] 상위 자동 체크의 즉시 반영 + 진행률 동기화
  - 마지막 하위/연결항목 완료 시 프론트 로컬 트리 재계산(recalcParents) + 진행률 로컬 갱신 보장
  - 서버 저장 실패 시 롤백 로직 재확인

- [ ] 서버 디버그 로그 추가 (임시)
  - checklist-progress GET에서 `totalMain/completedMain/totalConnected/completedConnected` 로그
  - 수집 후 로그 제거 예정

- [ ] 데스크탑 레이아웃 폴리싱
  - 항목 간격/타이포(leading)/배지 패딩 최적화

## 빠른 재현/검증 시나리오
1. 관리자에서 테스트 템플릿의 특정 항목에 "테스트 매뉴얼입니다." 연결 → 주의 2개 연결
2. 직원 상세에서 해당 항목 하위에 매뉴얼 카드 표시 + "연결주의 2개" 확인, 팝업에서 목록 확인
3. 하위 항목 n-1개 체크 상태에서 마지막 1개 체크 → 상위 즉시 체크 + 진행률 즉시 반영
4. 전체 완료 시 진행률 100% 확인 (120% 방지)

> 비고: 현재 임시 로직/스타일은 정상화 후 정리 커밋으로 스쿼시 예정
